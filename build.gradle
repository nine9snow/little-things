plugins {
	id 'fabric-loom' version '1.10-SNAPSHOT'
}

base.archivesName = project.mod_id
version = project.mod_version
group = project.mod_group

repositories {
	mavenLocal()
	maven { url = "https://dl.cloudsmith.io/public/solstice-mc/artifacts/maven/" }
}

loom {
	accessWidenerPath = file("src/main/resources/little_things.accesswidener")
}

fabricApi {
	configureDataGeneration()
}

dependencies {
	minecraft "com.mojang:minecraft:$minecraft_version"
	mappings "net.fabricmc:yarn:$yarn_mappings:v2"
	modImplementation "net.fabricmc:fabric-loader:$loader_version"
	modImplementation "net.fabricmc.fabric-api:fabric-api:$fabric_version"
	modImplementation "org.solstice:euclids-elements:$euclids_elements_version"
}

processResources {
	duplicatesStrategy = DuplicatesStrategy.EXCLUDE
	filesMatching("fabric.mod.json") {
		expand project.properties
	}
}

afterEvaluate {
	loom.runs.configureEach {
		vmArgs "-XX:+IgnoreUnrecognizedVMOptions",
				"-XX:+AllowEnhancedClassRedefinition",
				"-javaagent:${configurations.compileClasspath.find { it.name.contains("sponge-mixin") }}"
	}
}
